function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){var e="object"==("undefined"==typeof self?"undefined":_typeof(self))&&self.self===self&&self||"object"==("undefined"==typeof global?"undefined":_typeof(global))&&global.global===global&&global;if("function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(i,n,s){e.Backbone=t(e,s,i,n)});else if("undefined"!=typeof exports){var i,n=require("underscore");try{i=require("jquery")}catch(t){}t(e,exports,n,i)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(function(t,e,i,n){var s=t.Backbone,o=Array.prototype.slice;e.VERSION="1.3.3",e.$=n,e.noConflict=function(){return t.Backbone=s,this},e.emulateHTTP=!1,e.emulateJSON=!1;var r=function(t,e,n){i.each(e,function(e,s){i[s]&&(t.prototype[s]=function(t,e,n){switch(t){case 1:return function(){return i[e](this[n])};case 2:return function(t){return i[e](this[n],t)};case 3:return function(t,s){return i[e](this[n],a(t,this),s)};case 4:return function(t,s,o){return i[e](this[n],a(t,this),s,o)};default:return function(){var t=o.call(arguments);return t.unshift(this[n]),i[e].apply(i,t)}}}(e,s,n))})},a=function(t,e){return i.isFunction(t)?t:i.isObject(t)&&!e._isModel(t)?l(t):i.isString(t)?function(e){return e.get(t)}:t},l=function(t){var e=i.matches(t);return function(t){return e(t.attributes)}},u=e.Events={},c=/\s+/,h=function t(e,n,s,o,r){var a,l=0;if(s&&"object"===_typeof(s)){void 0!==o&&"context"in r&&void 0===r.context&&(r.context=o);for(a=i.keys(s);l<a.length;l++)n=t(e,n,a[l],s[a[l]],r)}else if(s&&c.test(s))for(a=s.split(c);l<a.length;l++)n=e(n,a[l],o,r);else n=e(n,s,o,r);return n};u.on=function(t,e,i){return d(this,t,e,i)};var d=function(t,e,i,n,s){(t._events=h(f,t._events||{},e,i,{context:n,ctx:t,listening:s}),s)&&((t._listeners||(t._listeners={}))[s.id]=s);return t};u.listenTo=function(t,e,n){if(!t)return this;var s=t._listenId||(t._listenId=i.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),r=o[s];if(!r){var a=this._listenId||(this._listenId=i.uniqueId("l"));r=o[s]={obj:t,objId:s,id:a,listeningTo:o,count:0}}return d(t,e,n,this,r),this};var f=function(t,e,i,n){if(i){var s=t[e]||(t[e]=[]),o=n.context,r=n.ctx,a=n.listening;a&&a.count++,s.push({callback:i,context:o,ctx:o||r,listening:a})}return t};u.off=function(t,e,i){return this._events?(this._events=h(p,this._events,t,e,{context:i,listeners:this._listeners}),this):this},u.stopListening=function(t,e,n){var s=this._listeningTo;if(!s)return this;for(var o=t?[t._listenId]:i.keys(s),r=0;r<o.length;r++){var a=s[o[r]];if(!a)break;a.obj.off(e,n,this)}return this};var p=function(t,e,n,s){if(t){var o,r=0,a=s.context,l=s.listeners;if(e||n||a){for(var u=e?[e]:i.keys(t);r<u.length;r++){var c=t[e=u[r]];if(!c)break;for(var h=[],d=0;d<c.length;d++){var f=c[d];n&&n!==f.callback&&n!==f.callback._callback||a&&a!==f.context?h.push(f):(o=f.listening)&&0==--o.count&&(delete l[o.id],delete o.listeningTo[o.objId])}h.length?t[e]=h:delete t[e]}return t}for(var p=i.keys(l);r<p.length;r++)delete l[(o=l[p[r]]).id],delete o.listeningTo[o.objId]}};u.once=function(t,e,n){var s=h(g,{},t,e,i.bind(this.off,this));return"string"==typeof t&&null==n&&(e=void 0),this.on(s,e,n)},u.listenToOnce=function(t,e,n){var s=h(g,{},e,n,i.bind(this.stopListening,this,t));return this.listenTo(t,s)};var g=function(t,e,n,s){if(n){var o=t[e]=i.once(function(){s(e,o),n.apply(this,arguments)});o._callback=n}return t};u.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),i=Array(e),n=0;n<e;n++)i[n]=arguments[n+1];return h(_,this._events,t,void 0,i),this};var _=function(t,e,i,n){if(t){var s=t[e],o=t.all;s&&o&&(o=o.slice()),s&&m(s,n),o&&m(o,[e].concat(n))}return t},m=function(t,e){var i,n=-1,s=t.length,o=e[0],r=e[1],a=e[2];switch(e.length){case 0:for(;++n<s;)(i=t[n]).callback.call(i.ctx);return;case 1:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o);return;case 2:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o,r);return;case 3:for(;++n<s;)(i=t[n]).callback.call(i.ctx,o,r,a);return;default:for(;++n<s;)(i=t[n]).callback.apply(i.ctx,e);return}};u.bind=u.on,u.unbind=u.off,i.extend(e,u);var v=e.Model=function(t,e){var n=t||{};e||(e={}),this.cid=i.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(n=this.parse(n,e)||{});var s=i.result(this,"defaults");n=i.defaults(i.extend({},s,n),s),this.set(n,e),this.changed={},this.initialize.apply(this,arguments)};i.extend(v.prototype,u,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",initialize:function(){},toJSON:function(t){return i.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return i.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!i.iteratee(t,this)(this.attributes)},set:function(t,e,n){if(null==t)return this;var s;if("object"===_typeof(t)?(s=t,n=e):(s={})[t]=e,n||(n={}),!this._validate(s,n))return!1;var o=n.unset,r=n.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=i.clone(this.attributes),this.changed={});var u=this.attributes,c=this.changed,h=this._previousAttributes;for(var d in s)e=s[d],i.isEqual(u[d],e)||a.push(d),i.isEqual(h[d],e)?delete c[d]:c[d]=e,o?delete u[d]:u[d]=e;if(this.idAttribute in s&&(this.id=this.get(this.idAttribute)),!r){a.length&&(this._pending=n);for(var f=0;f<a.length;f++)this.trigger("change:"+a[f],this,u[a[f]],n)}if(l)return this;if(!r)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,i.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var n in this.attributes)e[n]=void 0;return this.set(e,i.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!i.isEmpty(this.changed):i.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&i.clone(this.changed);var e=this._changing?this._previousAttributes:this.attributes,n={};for(var s in t){var o=t[s];i.isEqual(e[s],o)||(n[s]=o)}return!!i.size(n)&&n},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return i.clone(this._previousAttributes)},fetch:function(t){t=i.extend({parse:!0},t);var e=this,n=t.success;return t.success=function(i){var s=t.parse?e.parse(i,t):i;if(!e.set(s,t))return!1;n&&n.call(t.context,e,i,t),e.trigger("sync",e,i,t)},j(this,t),this.sync("read",this,t)},save:function(t,e,n){var s;null==t||"object"===_typeof(t)?(s=t,n=e):(s={})[t]=e;var o=(n=i.extend({validate:!0,parse:!0},n)).wait;if(s&&!o){if(!this.set(s,n))return!1}else if(!this._validate(s,n))return!1;var r=this,a=n.success,l=this.attributes;n.success=function(t){r.attributes=l;var e=n.parse?r.parse(t,n):t;if(o&&(e=i.extend({},s,e)),e&&!r.set(e,n))return!1;a&&a.call(n.context,r,t,n),r.trigger("sync",r,t,n)},j(this,n),s&&o&&(this.attributes=i.extend({},l,s));var u=this.isNew()?"create":n.patch?"patch":"update";"patch"!==u||n.attrs||(n.attrs=s);var c=this.sync(u,this,n);return this.attributes=l,c},destroy:function(t){t=t?i.clone(t):{};var e=this,n=t.success,s=t.wait,o=function(){e.stopListening(),e.trigger("destroy",e,e.collection,t)};t.success=function(i){s&&o(),n&&n.call(t.context,e,i,t),e.isNew()||e.trigger("sync",e,i,t)};var r=!1;return this.isNew()?i.defer(t.success):(j(this,t),r=this.sync("delete",this,t)),s||o(),r},url:function(){var t=i.result(this,"urlRoot")||i.result(this.collection,"url")||R();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,"$&/")+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},i.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=i.extend({},this.attributes,t);var n=this.validationError=this.validate(t,e)||null;return!n||(this.trigger("invalid",this,n,i.extend(e,{validationError:n})),!1)}});r(v,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var y=e.Collection=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,i.extend({silent:!0},e))},b={add:!0,remove:!0,merge:!0},O={add:!0,remove:!1},x=function(t,e,i){i=Math.min(Math.max(i,0),t.length);var n,s=Array(t.length-i),o=e.length;for(n=0;n<s.length;n++)s[n]=t[n+i];for(n=0;n<o;n++)t[n+i]=e[n];for(n=0;n<s.length;n++)t[n+o+i]=s[n]};i.extend(y.prototype,u,{model:v,initialize:function(){},toJSON:function(t){return this.map(function(e){return e.toJSON(t)})},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,i.extend({merge:!1},e,O))},remove:function(t,e){e=i.extend({},e);var n=!i.isArray(t);t=n?[t]:t.slice();var s=this._removeModels(t,e);return!e.silent&&s.length&&(e.changes={added:[],merged:[],removed:s},this.trigger("update",this,e)),n?s[0]:s},set:function(t,e){if(null!=t){(e=i.extend({},b,e)).parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var n=!i.isArray(t);t=n?[t]:t.slice();var s=e.at;null!=s&&(s=+s),s>this.length&&(s=this.length),s<0&&(s+=this.length+1);var o,r,a=[],l=[],u=[],c=[],h={},d=e.add,f=e.merge,p=e.remove,g=!1,_=this.comparator&&null==s&&!1!==e.sort,m=i.isString(this.comparator)?this.comparator:null;for(r=0;r<t.length;r++){o=t[r];var v=this.get(o);if(v){if(f&&o!==v){var y=this._isModel(o)?o.attributes:o;e.parse&&(y=v.parse(y,e)),v.set(y,e),u.push(v),_&&!g&&(g=v.hasChanged(m))}h[v.cid]||(h[v.cid]=!0,a.push(v)),t[r]=v}else d&&(o=t[r]=this._prepareModel(o,e))&&(l.push(o),this._addReference(o,e),h[o.cid]=!0,a.push(o))}if(p){for(r=0;r<this.length;r++)h[(o=this.models[r]).cid]||c.push(o);c.length&&this._removeModels(c,e)}var O=!1,w=!_&&d&&p;if(a.length&&w?(O=this.length!==a.length||i.some(this.models,function(t,e){return t!==a[e]}),this.models.length=0,x(this.models,a,0),this.length=this.models.length):l.length&&(_&&(g=!0),x(this.models,l,null==s?this.length:s),this.length=this.models.length),g&&this.sort({silent:!0}),!e.silent){for(r=0;r<l.length;r++)null!=s&&(e.index=s+r),(o=l[r]).trigger("add",o,this,e);(g||O)&&this.trigger("sort",this,e),(l.length||c.length||u.length)&&(e.changes={added:l,removed:c,merged:u},this.trigger("update",this,e))}return n?t[0]:t}},reset:function(t,e){e=e?i.clone(e):{};for(var n=0;n<this.models.length;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,i.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,i.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,i.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return o.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(t.attributes||t)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?"find":"filter"](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error("Cannot sort a set without a comparator");t||(t={});var n=e.length;return i.isFunction(e)&&(e=i.bind(e,this)),1===n||i.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return this.map(t+"")},fetch:function(t){var e=(t=i.extend({parse:!0},t)).success,n=this;return t.success=function(i){var s=t.reset?"reset":"set";n[s](i,t),e&&e.call(t.context,n,i,t),n.trigger("sync",n,i,t)},j(this,t),this.sync("read",this,t)},create:function(t,e){var n=(e=e?i.clone(e):{}).wait;if(!(t=this._prepareModel(t,e)))return!1;n||this.add(t,e);var s=this,o=e.success;return e.success=function(t,e,i){n&&s.add(t,i),o&&o.call(i.context,t,e,i)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;(e=e?i.clone(e):{}).collection=this;var n=new this.model(t,e);return n.validationError?(this.trigger("invalid",this,n.validationError,e),!1):n},_removeModels:function(t,e){for(var i=[],n=0;n<t.length;n++){var s=this.get(t[n]);if(s){var o=this.indexOf(s);this.models.splice(o,1),this.length--,delete this._byId[s.cid];var r=this.modelId(s.attributes);null!=r&&delete this._byId[r],e.silent||(e.index=o,s.trigger("remove",s,this,e)),i.push(s),this._removeReference(s,e)}}return i},_isModel:function(t){return t instanceof v},_addReference:function(t,e){this._byId[t.cid]=t;var i=this.modelId(t.attributes);null!=i&&(this._byId[i]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var i=this.modelId(t.attributes);null!=i&&delete this._byId[i],this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,i,n){if(e){if(("add"===t||"remove"===t)&&i!==this)return;if("destroy"===t&&this.remove(e,n),"change"===t){var s=this.modelId(e.previousAttributes()),o=this.modelId(e.attributes);s!==o&&(null!=s&&delete this._byId[s],null!=o&&(this._byId[o]=e))}}this.trigger.apply(this,arguments)}});r(y,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var w=e.View=function(t){this.cid=i.uniqueId("view"),i.extend(this,i.pick(t,I)),this._ensureElement(),this.initialize.apply(this,arguments)},k=/^(\S+)\s*(.*)$/,I=["model","collection","el","id","attributes","className","tagName","events"];i.extend(w.prototype,u,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=i.result(this,"events")),!t)return this;for(var e in this.undelegateEvents(),t){var n=t[e];if(i.isFunction(n)||(n=this[n]),n){var s=e.match(k);this.delegate(s[1],s[2],i.bind(n,this))}}return this},delegate:function(t,e,i){return this.$el.on(t+".delegateEvents"+this.cid,e,i),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,i){return this.$el.off(t+".delegateEvents"+this.cid,e,i),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(i.result(this,"el"));else{var t=i.extend({},i.result(this,"attributes"));this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),e.sync=function(t,n,s){var o=E[t];i.defaults(s||(s={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var r={type:o,dataType:"json"};if(s.url||(r.url=i.result(n,"url")||R()),null!=s.data||!n||"create"!==t&&"update"!==t&&"patch"!==t||(r.contentType="application/json",r.data=JSON.stringify(s.attrs||n.toJSON(s))),s.emulateJSON&&(r.contentType="application/x-www-form-urlencoded",r.data=r.data?{model:r.data}:{}),s.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){r.type="POST",s.emulateJSON&&(r.data._method=o);var a=s.beforeSend;s.beforeSend=function(t){if(t.setRequestHeader("X-HTTP-Method-Override",o),a)return a.apply(this,arguments)}}"GET"===r.type||s.emulateJSON||(r.processData=!1);var l=s.error;s.error=function(t,e,i){s.textStatus=e,s.errorThrown=i,l&&l.call(s.context,t,e,i)};var u=s.xhr=e.ajax(i.extend(r,s));return n.trigger("request",n,u,s),u};var E={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var S=e.Router=function(t){t||(t={}),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},C=/\((.*?)\)/g,T=/(\(\?)?:\w+/g,$=/\*\w+/g,M=/[\-{}\[\]+?.,\\\^$|#\s]/g;i.extend(S.prototype,u,{initialize:function(){},route:function(t,n,s){i.isRegExp(t)||(t=this._routeToRegExp(t)),i.isFunction(n)&&(s=n,n=""),s||(s=this[n]);var o=this;return e.history.route(t,function(i){var r=o._extractParameters(t,i);!1!==o.execute(s,r,n)&&(o.trigger.apply(o,["route:"+n].concat(r)),o.trigger("route",n,r),e.history.trigger("route",o,n,r))}),this},execute:function(t,e,i){t&&t.apply(this,e)},navigate:function(t,i){return e.history.navigate(t,i),this},_bindRoutes:function(){if(this.routes){this.routes=i.result(this,"routes");for(var t,e=i.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(M,"\\$&").replace(C,"(?:$1)?").replace(T,function(t,e){return e?t:"([^/?]+)"}).replace($,"([^?]*?)"),new RegExp("^"+t+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(t,e){var n=t.exec(e).slice(1);return i.map(n,function(t,e){return e===n.length-1?t||null:t?decodeURIComponent(t):null})}});var P=e.History=function(){this.handlers=[],this.checkUrl=i.bind(this.checkUrl,this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},A=/^[#\/]|\s+$/g,U=/^\/+|\/+$/g,H=/#.*$/;P.started=!1,i.extend(P.prototype,u,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,"%2525"))},getSearch:function(){var t=this.location.href.replace(/#.*/,"").match(/\?.+/);return t?t[0]:""},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:""},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(A,"")},start:function(t){if(P.started)throw new Error("Backbone.history has already been started");if(P.started=!0,this.options=i.extend({root:"/"},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(U,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||"/";return this.location.replace(e+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var n=document.body,s=n.insertBefore(this.iframe,n.firstChild).contentWindow;s.document.open(),s.document.close(),s.location.hash="#"+this.fragment}var o=window.addEventListener||function(t,e){return attachEvent("on"+t,e)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent("on"+t,e)};this._usePushState?t("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&t("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),P.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),i.some(this.handlers,function(e){if(e.route.test(t))return e.callback(t),!0}))},navigate:function(t,e){if(!P.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||"");var i=this.root;""!==t&&"?"!==t.charAt(0)||(i=i.slice(0,-1)||"/");var n=i+t;if(t=this.decodeFragment(t.replace(H,"")),this.fragment!==t){if(this.fragment=t,this._usePushState)this.history[e.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var s=this.iframe.contentWindow;e.replace||(s.document.open(),s.document.close()),this._updateHash(s.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,i){if(i){var n=t.href.replace(/(javascript:|#).*$/,"");t.replace(n+"#"+e)}else t.hash="#"+e}}),e.history=new P;v.extend=y.extend=S.extend=w.extend=P.extend=function(t,e){var n,s=this;return n=t&&i.has(t,"constructor")?t.constructor:function(){return s.apply(this,arguments)},i.extend(n,s,e),n.prototype=i.create(s.prototype,t),n.prototype.constructor=n,n.__super__=s.prototype,n};var R=function(){throw new Error('A "url" property or function must be specified')},j=function(t,e){var i=e.error;e.error=function(n){i&&i.call(e.context,t,n,e),t.trigger("error",t,n,e)}};return e}),function(t){"use strict";window.Hustle=function(t,e,i){var n={},s={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g},o=_.extend({},Backbone.Events),r=Backbone.View.extend({initialize:function(){_.isFunction(this.initMix)&&this.initMix.apply(this,arguments),this.render&&(this.render=_.wrap(this.render,function(t){this.trigger("before_render"),t.call(this),o.trigger("view.rendered",this),this.trigger("rendered")})),_.isFunction(this.init)&&this.init.apply(this,arguments)}}),a=_.memoize(function(t){var e;return function(i){return(e=e||_.template(document.getElementById(t).innerHTML,null,s))(i).replace("/*<![CDATA[*/","").replace("/*]]>*/","")}}),l=_.memoize(function(t){var e;return function(i){return(e=e||_.template(t,null,s))(i)}});return{define:function(s,o){if(s.split(".").length)!function n(s,r){var a,l=s.split("."),u=l.splice(0,1)[0];u&&(l.length?r[u]=r[u]||{}:(a=o.call(null,t,e,i),r[u]=_.isFunction(a)||void 0===a?a:_.extend(r[u]||{},a)),l.length&&u&&n(l.join("."),r[u]))}(s,n);else{var r=n[s]||{};n[s]=_.extend(r,o.call(null,t,e,i))}},getModules:function(){return n},get:function(t){var e,i;return t.split(".").length?(e=!1,(i=function(t,n){var s=t.split("."),o=s.splice(0,1)[0];e=n[o],s.length&&i(s.join("."),n[o])})(t,n),e):n[t]||!1},Events:o,View:r,template:a,createTemplate:l,getTemplateOptions:function(){return t.extend(!0,{},s)},cookie:{set:function(e,i,n){var s,o;i=t.isArray(i)||t.isPlainObject(i)?JSON.stringify(i):i,isNaN(n)?o="":((s=new Date).setTime(s.getTime()+24*n*60*60*1e3),o="; expires="+s.toGMTString()),document.cookie=e+"="+i+o+"; path=/"},get:function(t){var e,i,n,s=document.cookie.split(";"),o=s.length;for(n=t+"=",e=0;e<o;e+=1){for(i=s[e];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(n)){var r=i.substring(n.length,i.length);return r?JSON.parse(r):r}}return null}},consts:{ModuleShowCount:"hustle_module_show_count-"}}}(jQuery,document,window)}(jQuery);var Optin=Optin||{};function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _readOnlyError(t){throw new Error('"'+t+'" is read-only')}Optin.View={},Optin.Models={},Optin.Events={},"undefined"!=typeof Backbone&&_.extend(Optin.Events,Backbone.Events),function(t){"use strict";Optin.NEVER_SEE_PREFIX="inc_optin_never_see_again-",Optin.COOKIE_PREFIX="inc_optin_long_hidden-",Optin.POPUP_COOKIE_PREFIX="inc_optin_popup_long_hidden-",Optin.SLIDE_IN_COOKIE_PREFIX="inc_optin_slide_in_long_hidden-",Optin.EMBEDDED_COOKIE_PREFIX="inc_optin_embedded_long_hidden-",Optin.globalMixin=function(){_.mixin({log:function(){},toBool:function(t){return _.isBoolean(t)?t:_.isString(t)&&-1!==["true","false","1"].indexOf(t.toLowerCase())?"true"===t.toLowerCase()||"1"===t.toLowerCase():_.isNumber(t)?!!t:!(_.isUndefined(t)||_.isNull(t)||_.isNaN(t))&&t},isTrue:function(t){return!(_.isUndefined(t)||_.isNull(t)||_.isNaN(t))&&(_.isNumber(t)?0!==t:(t=t.toString().toLowerCase(),-1!==["1","true","on"].indexOf(t)))},isFalse:function(t){return!_.isTrue(t)},controlBase:function(t,e,i){return i=_.isUndefined(i)?"checked":i,t=_.toBool(t),e=_.isBoolean(t)?_.isTrue(e):e,_.isEqual(t,e)?i+"="+i:""},checked:function(t,e){return _.controlBase(t,e,"checked")},selected:function(t,e){return _.controlBase(t,e,"selected")},disabled:function(t,e){return _.controlBase(t,e,"disabled")},class:function(t,e,i){return _.isTrue(t)?e:void 0!==i?i:""},add_class:function(t,e,i){return"class={class}".replace("{class}",_.class(t,e,i))},toUpperCase:function(t){return _.isString(t)?t.toUpperCase():""}}),_.findKey||_.mixin({findKey:function(t,e,i){e=cb(e,i);for(var n,s=_.keys(t),o=0,r=s.length;o<r;o++)if(e(t[n=s[o]],n,t))return n}})},Optin.globalMixin(),Backbone.Model.prototype.toJSON=function(){var t,e=_.clone(this.attributes);for(t in e)(e[t]instanceof Backbone.Model||Backbone.Collection&&e[t]instanceof Backbone.Collection)&&(e[t]=e[t].toJSON());return e},Optin.template=_.memoize(function(e){var i,n={evaluate:/<#([\s\S]+?)#>/g,interpolate:/\{\{\{([\s\S]+?)\}\}\}/g,escape:/\{\{([^\}]+?)\}\}(?!\})/g};return function(s){return(i=i||_.template(t("#"+e).html(),null,n))(s).replace("/*<![CDATA[*/","").replace("/*]]>*/","")}}),Optin.templateCompat=_.memoize(function(e){var i;return function(n){return(i=i||_.template(t("#"+e).html()))(n).replace("/*<![CDATA[*/","").replace("/*]]>*/","")}}),Optin.cookie=Hustle.cookie,Optin.Mixins={_mixins:{},_servicesMixins:{},_desingMixins:{},_displayMixins:{},add:function(t,e){this._mixins[t]=e},getMixins:function(){return this._mixins},addServicesMixin:function(t,e){this._servicesMixins[t]=e},getServicesMixins:function(){return this._servicesMixins}}}(jQuery),function(t){"use strict";var e=window.Optin||{};incOpt.is_admin||(e.moduleLogView=Backbone.Model.extend({url:incOpt.ajaxurl+"?action=hustle_module_viewed",defaults:{page_id:incOpt.page_id},parse:function(t){t.success}}),t(document).on("hustle:module:displayed",function(t,i){if("object"===_typeof(i)){var n=i.moduleType,s=Hustle.consts.ModuleShowCount+n+"-"+i.moduleId,o=Hustle.cookie.get(s);Hustle.cookie.set(s,o+1,30);var r="undefined"!==i.$el.data("sub-type")?i.$el.data("sub-type"):null;if(void 0!==e.moduleLogView&&i.isTrackingEnabled){var a=new e.moduleLogView;a.set("module_sub_type",r),a.set("module_type",n),a.set("module_id",i.moduleId),a.save()}}}),e.updateSshareNetworks=function(i){var n=void 0===i?e.networksToRetrieve:i;void 0!==n&&n.length&&t.ajax({type:"POST",url:incOpt.ajaxurl,dataType:"json",data:{action:"hustle_update_network_shares",postId:incOpt.page_id,networks:n}}).done(function(e){if(e.success){var i=e.data;t.each(i.networks,function(e,n){var s=t('.hustle-share-icon[data-counter="native"][data-network="'.concat(e,'"]'));s.length&&s.each(function(){var e=t(this).find(".hustle-counter"),s=parseInt(t(this).data("count"),10);s>parseInt(n,10)&&(n=parseInt(s,10));var o="";o=1e3>n?n:1e6>n?(n/1e3).toFixed(1)+i.shorten.thousand:(n/1e6).toFixed(1)+i.shorten.million,e.text(o)})})}})})}(jQuery),function(t){t(document).on("submit","form.hustle-unsubscribe-form",function(e){e.preventDefault();var i=t(e.target),n=i.find(".hustle-email-section"),s=i.serialize(),o=i.find("button"),r=i.find(".wpoi-submit-failure");return o.attr("disabled",!0),o.addClass("sui-button-onload"),i.on("keypress",function(){return r.hide()}),t.ajax({type:"POST",url:incOpt.ajaxurl,dataType:"json",data:{action:"hustle_unsubscribe_form_submission",data:s},success:function(t){t.success&&!0===t.success?(n.hide(),r.hide(),t.data.wrapper&&t.data.html&&i.find(t.data.wrapper).html(t.data.html)):t.data.html&&(r.text(t.data.html),r.show())},error:function(){r.text(r.data("default-error")),r.show()},complete:function(){o.attr("disabled",!1),o.removeClass("sui-button-onload")}}),!1})}(jQuery),function(t,e,i){"use strict";incOpt.is_upfront||(incOpt.is_admin||(Optin.ModuleLogConversion=Backbone.Model.extend({url:incOpt.ajaxurl+"?action=hustle_module_converted",defaults:{page_id:incOpt.page_id},parse:function(t){t.success}})),Optin.Module=Backbone.View.extend({moduleId:"",moduleType:"",settings:{},data:{},appearAfter:"time",parent:"body",cookieKey:"",neverSeeCookieKey:"",isShown:!1,events:{"click .hustle-button-cta":"ctaClicked"},close:_.noop,initialize:function(t){this.data=t,this.moduleId=t.module_id,this.settings=t.settings,this.moduleType=t.module_type,this.isTrackingEnabled="enabled"===this.$el.data("tracking"),this.setOnInit(t),this.shouldDisplay()?this.render():this.$el.css("display","none")},setOnInit:function(){"optin"===this.data.module_mode&&(this.$el.off("submit").on("submit",t.proxy(this,"handleSubmission")),this.$el.find(".hustle-layout-form").off("change").on("change",t.proxy(this,"onInputChange"))),this.expiration=parseInt(this.settings.expiration,10),this.expirationDays=this.getExpirationDays(),this.appearAfter=this.settings.triggers.trigger,this.triggers={onTimeDelay:this.settings.triggers.on_time_delay,onTimeUnit:this.settings.triggers.on_time_unit,onScroll:this.settings.triggers.on_scroll,onScrollPagePercent:parseInt(this.settings.triggers.on_scroll_page_percent),onScrollCssSelector:this.settings.triggers.on_scroll_css_selector,enableOnClickElement:this.settings.triggers.enable_on_click_element,onClickElement:this.settings.triggers.on_click_element,enableOnClickShortcode:this.settings.triggers.enable_on_click_shortcode,onExitIntentperSession:this.settings.triggers.on_exit_intent_per_session,onExitIntentDelayed:this.settings.triggers.on_exit_intent_delayed,onExitIntentDelayedTime:this.settings.triggers.on_exit_intent_delayed_time,onExitIntentDelayedUnit:this.settings.triggers.on_exit_intent_delayed_unit,onAdblock:this.settings.triggers.on_adblock},"popup"===this.moduleType?this.cookieKey=Optin.POPUP_COOKIE_PREFIX+this.moduleId:"slidein"===this.moduleType?this.cookieKey=Optin.SLIDE_IN_COOKIE_PREFIX+this.moduleId:"embedded"===this.moduleType&&(this.cookieKey=Optin.EMBEDDED_COOKIE_PREFIX+this.moduleId),this.neverSeeCookieKey=Optin.NEVER_SEE_PREFIX+this.moduleType+"-"+this.moduleId},shouldDisplay:function(){if(!this.$el.length)return!1;var t,e=Optin.cookie.get(this.neverSeeCookieKey);return(e=parseInt(e)===parseInt(this.moduleId))?t=!1:(t="no_show_on_post"===this.settings.after_close?0<parseInt(incOpt.page_id,10)?!_.isTrue(Optin.cookie.get(this.cookieKey+"_"+incOpt.page_id)):0!==parseInt(incOpt.page_id,10)||!incOpt.page_slug||!_.isTrue(Optin.cookie.get(this.cookieKey+"_"+incOpt.page_slug)):"no_show_all"!==this.settings.after_close||!_.isTrue(Optin.cookie.get(this.cookieKey)))?("no_show_on_post"===this.data.settings.hide_after_subscription?t=0<parseInt(incOpt.page_id,10)?!_.isTrue(Optin.cookie.get(this.cookieKey+"_success_"+incOpt.page_id)):0!==parseInt(incOpt.page_id,10)||!incOpt.page_slug||!_.isTrue(Optin.cookie.get(this.cookieKey+"_"+incOpt.page_slug)):"no_show_all"===this.data.settings.hide_after_subscription&&(t=!_.isTrue(Optin.cookie.get(this.cookieKey+"_success"))),t?("no_show_on_post"===this.data.settings.hide_after_cta?t=0<parseInt(incOpt.page_id,10)?!_.isTrue(Optin.cookie.get(this.cookieKey+"_cta_success_"+incOpt.page_id)):0!==parseInt(incOpt.page_id,10)||!incOpt.page_slug||!_.isTrue(Optin.cookie.get(this.cookieKey+"_cta_"+incOpt.page_slug)):"no_show_all"===this.data.settings.hide_after_cta&&(t=!_.isTrue(Optin.cookie.get(this.cookieKey+"_cta_success"))),t):t):t},getExpirationDays:function(){switch(this.settings.expiration_unit){case"months":return 30*this.expiration;case"weeks":return 7*this.expiration;case"hours":return this.expiration/24;case"minutes":return this.expiration/1440;case"seconds":return this.expiration/86400;default:return this.expiration}},render:function(){"function"==typeof this[this.appearAfter+"Trigger"]&&(this[this.appearAfter+"Trigger"](),this.$el.off("hustle:module:closed").on("hustle:module:closed",t.proxy(this,"onModuleClosed","click_close_icon")),this.$el.off("hustle:module:hidden").on("hustle:module:hidden",t.proxy(this,"onModuleClosed","auto_hide")),this.$el.off("hustle:module:click_outside").on("hustle:module:click_outside",t.proxy(this,"onModuleClosed","click_outside")),this.$el.off("hustle:module:esc_key_pressed").on("hustle:module:esc_key_pressed",t.proxy(this,"onModuleClosed","esc_key")),this.$el.off("hustle:module:clicked_never_see").on("hustle:module:clicked_never_see",t.proxy(this,"onModuleClosed","click_never_see"))),HUI.inputFilled()},executeRecaptcha:function(t,e){var i=e.data().version;if("v2_checkbox"===i)this.doSubmit(t);else{var n={};"v3_recaptcha"===i&&(n.action="contact"),grecaptcha.execute(e.attr("recaptcha-id"),n)}},display:function(){this.isShown||(this.beforeShowModule(),this.showModule(),t(document).trigger("hustle:module:displayed",this),this.isShown=!0)},beforeShowModule:function(){if(this.handleCompatibility(),HUI.maybeRenderRecaptcha(this.$el,this),this.$el.find(".hustle-select2").length&&HUI.select2(),this.$el.find(".hustle-time").length&&HUI.timepicker(".hustle-time"),this.$el.find(".hustle-date").length){var e=t(".hustle-date"),i=incOpt.days_and_months;_.each(e,function(t){HUI.datepicker(t,i.days_full,i.days_short,i.days_min,i.months_full,i.months_short)})}HUI.inputFilled()},timeTrigger:function(){var e=1e3*parseInt(this.triggers.onTimeDelay,10);"minutes"===this.triggers.onTimeUnit?e*=60:"hours"===this.triggers.onTimeUnit&&(e*=3600),_.delay(t.proxy(this,"display"),e)},clickTrigger:function(){var e=this,i="";_.isTrue(this.triggers.enableOnClickElement)&&""!==(i=t.trim(this.triggers.onClickElement))&&(t(i).length&&t(document).on("click",i,function(t){t.preventDefault(),e.display()}));_.isTrue(this.triggers.enableOnClickShortcode)&&t(document).on("click",".hustle_module_shortcode_trigger",function(i){i.preventDefault(),t(this).data("id")==e.moduleId&&t(this).data("type")==e.type&&e.display()})},scrollTrigger:function(){var n=this,s=!1;if("scrolled"===this.triggers.onScroll&&t(i).scroll(_.debounce(function(){s||100*i.pageYOffset/t(e).height()>=parseFloat(n.triggers.onScrollPagePercent)&&(n.display(),s=!0)},50)),"selector"===this.triggers.onScroll){var o=t(this.triggers.onScrollCssSelector);o.length&&t(i).scroll(_.debounce(function(){s||i.pageYOffset>=o.offset().top&&(n.display(),s=!0)},50))}},exit_intentTrigger:function(){var i=this,n=0;_.isTrue(this.triggers.onExitIntentDelayed)&&(n=1e3*parseInt(this.triggers.onExitIntentDelayedTime,10),"minutes"===this.triggers.onExitIntentDelayedTime?n*=60:"hours"===this.triggers.onExitIntentDelayedTime&&(n*=3600)),_.isTrue(this.triggers.onExitIntentperSession)?t(e).on("mouseleave",_.debounce(function(e){t("input").is(":focus")||(i.setExitTimer(),t(this).off(e))},300)):t(e).on("mouseleave",_.debounce(function(e){t("input").is(":focus")||i.setExitTimer()},300)),t("html").on("mousemove",_.debounce(function(t){i.resetExitTimer()},300)),this.exitTimer=null,this.resetExitTimer=function(){i.exitTimer&&clearTimeout(i.exitTimer)},this.setExitTimer=function(){i.exitTimer=setTimeout(function(){i.exitTimer=null,i.display()},n)}},adblockTrigger:function(){!t("#hustle_optin_adBlock_detector").length&&_.isTrue(this.triggers.onAdblock)&&this.display()},convertToMicroseconds:function(t,e){return"seconds"===e?1e3*parseInt(t,10):"minutes"===e?60*parseInt(t,10)*1e3:60*parseInt(t,10)*60*1e3},onModuleClosed:function(e){this.clearRunningCompatInterval(),this.$el.find("iframe").each(function(){t(this).attr("src",t(this).attr("src"))}),Array.isArray(this.settings.after_close_trigger)&&-1!==this.settings.after_close_trigger.indexOf(e)?"no_show_on_post"===this.settings.after_close?0<parseInt(incOpt.page_id,10)?Optin.cookie.set(this.cookieKey+"_"+incOpt.page_id,this.moduleId,this.expirationDays):0===parseInt(incOpt.page_id,10)&&incOpt.page_slug&&Optin.cookie.set(this.cookieKey+"_"+incOpt.page_slug,this.moduleId,this.expirationDays):"no_show_all"===this.settings.after_close&&Optin.cookie.set(this.cookieKey,this.moduleId,this.expirationDays):"click_never_see"===e&&Hustle.cookie.set(this.neverSeeCookieKey,this.moduleId,this.expirationDays),this.isShown=!1,this.stopPlayingAudioVideo()},redirectOnExternalFormSubmit:function(e,i){this.setCookiesAfterSubscription();var n=t(e.target);n.attr("action")&&setTimeout(function(){return window.location.replace(n.attr("action"))},i)},handleCompatibility:function(){var e=this,i=this.data.settings.on_submit,n=this.convertToMicroseconds(this.data.settings.on_submit_delay,this.data.settings.on_submit_delay_unit);-1!==t.inArray(i,["close","default"])&&"embedded"!==this.moduleType?(this.$el.find("form.wpcf7-form").length&&this.$el.on("wpcf7mailsent",function(){return e.closeAfterSubmission(e.el,n)}),this.$(".forminator-custom-form").length&&this.$el.on("forminator:form:submit:success",function(){return e.closeAfterSubmission(e.el,n)}),this.$(".gform_wrapper").length&&t(document).on("gform_confirmation_loaded",function(){return e.closeAfterSubmission(e.el,n)}),this.$(".nf-form-cont").length&&t(document).on("nfFormSubmitResponse",function(){return e.closeAfterSubmission(e.el,n)})):"redirect"===i&&(this.$el.find("form.wpcf7-form").length&&this.$el.on("wpcf7mailsent",function(t){return e.redirectOnExternalFormSubmit(t,n)}),this.$(".forminator-custom-form").length&&this.$el.on("forminator:form:submit:success",function(t){return e.redirectOnExternalFormSubmit(t,n)}),this.$(".gform_wrapper").length&&t(document).on("gform_confirmation_loaded",function(t){return e.redirectOnExternalFormSubmit(t,n)}),this.$(".nf-form-cont").length&&t(document).on("nfFormSubmitResponse",function(t){return e.redirectOnExternalFormSubmit(t,n)}));var s=this.$el.find("form#subscribes_form"),o=1e3;s.length&&(e.waitEnewsletterResult=setInterval(function(){o+=(_readOnlyError("enewsletterWaited"),1e3);var t=e.$el.find("#message");_.isEmpty(t.text().trim())&&216e6!==o||e.close()},1e3))},closeAfterSubmission:function(t,e){var i=this;this.setCookiesAfterSubscription(),setTimeout(function(){return i.close(t)},e)},maybeCloseAfterCtaClick:function(t,e){if(void 0!==this.data.settings.close_cta&&"0"!==this.data.settings.close_cta){var i=this;setTimeout(function(){return i.close(t)},e)}},setCookiesAfterSubscription:function(){if(void 0!==this.data.settings.hide_after_subscription&&"keep_show"!==this.data.settings.hide_after_subscription){var t,e=this.data.module_id;"popup"===this.data.module_type?t=Optin.POPUP_COOKIE_PREFIX+e:"slidein"===this.data.module_type?t=Optin.SLIDE_IN_COOKIE_PREFIX+e:"embedded"===this.data.module_type&&(t=Optin.EMBEDDED_COOKIE_PREFIX+e),"no_show_on_post"===this.data.settings.hide_after_subscription?Optin.cookie.set(t+"_success_"+incOpt.page_id,e):"no_show_all"===this.data.settings.hide_after_subscription&&Optin.cookie.set(t+"_success",e)}},maybeSetCookiesAfterCtaClick:function(){if(void 0!==this.data.settings.hide_after_cta&&"keep_show"!==this.data.settings.hide_after_cta){var t,e=this.data.module_id;"popup"===this.data.module_type?t=Optin.POPUP_COOKIE_PREFIX+e:"slidein"===this.data.module_type?t=Optin.SLIDE_IN_COOKIE_PREFIX+e:"embedded"===this.data.module_type&&(t=Optin.EMBEDDED_COOKIE_PREFIX+e),"no_show_on_post"===this.data.settings.hide_after_cta?Optin.cookie.set(t+"_cta_success_"+incOpt.page_id,e):"no_show_all"===this.data.settings.hide_after_cta&&Optin.cookie.set(t+"_cta_success",e)}},handleSubmission:function(e){e.preventDefault();var i=t(e.target);if(!i.data("sending")){var n=HUI.optinValidate(this.$el);if((n=this.validateSubmission(n)).length)HUI.optinError(i.find(".hustle-error-message"),n);else{HUI.optinSubmit(i.find(".hustle-button-submit"));var s=i.find(".hustle-recaptcha");s.length?this.executeRecaptcha(i,s):this.doSubmit(i)}}},doSubmit:function(e){var i=this,n=e.serialize(),s=e.find('input[name="hustle_module_id"]').val(),o=e.find("#hustle-modal-gdpr-"+s+":checked").val(),r=e.find(".hustle-error-message"),a=(r.find("p"),r.data("default-error"),_.find(Modules,function(t,e){return parseInt(s,10)===parseInt(t.module_id,10)}));e.trigger("hustle:module:submit",n),e.data("sending",!0),t.ajax({type:"POST",url:incOpt.ajaxurl,dataType:"json",data:{action:"hustle_module_form_submit",data:{form:n,module_id:s,gdpr:o,uri:encodeURI(window.location.href)}},success:function(t){if(t&&t.success){var o;if(e.trigger("hustle:module:submit:success",n),i.setCookiesAfterSubscription(),void 0!==a.settings.hide_after_subscription)"popup"===a.module_type?o=Optin.POPUP_COOKIE_PREFIX+s:"slidein"===a.module_type?o=Optin.SLIDE_IN_COOKIE_PREFIX+s:"embedded"===a.module_type&&(o=Optin.EMBEDDED_COOKIE_PREFIX+s),"no_show_on_post"===a.settings.hide_after_subscription?(0<parseInt(incOpt.page_id,10)?Optin.cookie.set(o+"_success_"+incOpt.page_id,s):0===parseInt(incOpt.page_id,10)&&incOpt.page_slug&&Optin.cookie.set(o+"_success_"+incOpt.page_slug,s),Optin.cookie.set(o+"_success_"+incOpt.page_id,s)):"no_show_all"===a.settings.hide_after_subscription&&Optin.cookie.set(o+"_success",s);if("redirect"===t.data.behavior.after_submit&&0<t.data.behavior.url.length)window.location.assign(t.data.behavior.url);else{var l=i.$(".hustle-success"),u=i.$(".hustle-success-content");t.data.message&&u.length&&u.html(t.data.message),HUI.optinSuccess(l,l.data("close-delay"))}}else{e.trigger("hustle:module:submit:failed",n);var c=e.find(".hustle-recaptcha").attr("recaptcha-id");c&&grecaptcha.reset(c),HUI.optinError(r,t.data.errors)}},error:function(){e.trigger("hustle:module:submit:failed",n),HUI.optinError(r)},complete:function(){e.data("sending",!1),e.find(".hustle-button-onload").removeClass("hustle-button-onload")}})},validateSubmission:function(e){var i=this,n=this.$el.find('[data-validate="1"]'),s=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/i,o=/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?/i;return t.each(n,function(n,r){var a=t(r),l=String(a.val()).trim().toLowerCase();if(l.length){var u=!0;if("email"===a.attr("type"))u=s.test(l);else if("url"===a.attr("type"))u=o.test(l);else if("datepicker"===a.attr("type")){var c=a.data("format").toString(),h="";"mm/dd/yy"===c||"mm/dd/yy"===c||"mm.dd.yy"===c||"mm.dd.yy"===c||"mm-dd-yy"===c||"mm-dd-yy"===c?h=/^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.](19|20)\d\d/:"dd/mm/yy"===c||"dd/mm/yy"===c||"dd.mm.yy"===c||"dd.mm.yy"===c||"dd-mm-yy"===c||"dd-mm-yy"===c?h=/^(0[1-9]|[12][0-9]|3[01])[- \/.](0[1-9]|1[012])[- \/.](19|20)\d\d/:"yy/mm/dd"!==c&&"Y/m/d"!==c&&"yy.mm.dd"!==c&&"Y.m.d"!==c&&"yy-mm-dd"!==c&&"Y-m-d"!==c||(h=/^(19|20)\d\d[- \/.](0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])/),""!==h&&(u=h.test(l))}else"timepicker"===a.attr("type")&&(u=i.validateTime(l,a.data("time-format")));u||(a.closest(".hustle-field").addClass("hustle-field-error"),e.push(a.data("validation-error")))}}),e},validateTime:function(e,i){var n=e.match(/^(\d{1,2}):(\d{2})(:00)?( [apAP][mM])?$/);return!!n&&("HH:mm"==i?!(23<n[1])&&!(59<n[2]):!(1>n[1]||12<n[1])&&(!(59<n[2])&&("am"===t.trim(n[4].toLowerCase())||"pm"===t.trim(n[4].toLowerCase()))))},onInputChange:function(e){t(e.target).closest(".hustle-field").removeClass("hustle-field-error")},stopPlayingAudioVideo:function(t){this.$el.find("audio, video").trigger("pause")},clearRunningCompatInterval:function(){void 0!==this.waitEnewsletterResult&&clearInterval(this.waitEnewsletterResult)},ctaClicked:function(e){var i=t(e.target),n=this.convertToMicroseconds(this.data.settings.close_cta_time,this.data.settings.close_cta_unit);if(void 0!==Optin.ModuleLogConversion&&this.isTrackingEnabled){var s=new Optin.ModuleLogConversion,o="undefined"!==this.$el.data("sub-type")?this.$el.data("sub-type"):"";s.set("module_sub_type",o),s.set("module_id",this.moduleId),s.set("cta",!0),s.save()}this.maybeSetCookiesAfterCtaClick(),this.maybeCloseAfterCtaClick(i,n)}}))}(jQuery,document,window),function(t){"use strict";(Optin=Optin||{}).Embedded=Optin.Module.extend({type:"embedded",render:function(){var e=this.el;t(window).on("resize",function(){HUI.inlineResize(e)}),this.display()},showModule:function(){HUI.inlineResize(this.el),HUI.inlineLoad(this.el)}})}(jQuery),function(t){"use strict";incOpt.is_upfront||((Optin=window.Optin||{}).PopUp=Optin.Module.extend({type:"popup",showModule:function(){"0"===this.settings.allow_scroll_page&&t("html").addClass("hustle-no-scroll");var e="false"!==String(this.$el.data("close-delay"))&&this.$el.data("close-delay");HUI.popupLoad(this.el,e)},close:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;HUI.popupClose(this.$el,t)}}))}(jQuery),function(t){"use strict";incOpt.is_upfront||((Optin=window.Optin||{}).SlideIn=Optin.Module.extend({type:"slidein",showModule:function(){var e=this,i="false"!==String(this.$el.data("close-delay"))&&this.$el.data("close-delay");HUI.slideinLayouts(this.$el),t(window).on("resize",function(){HUI.slideinLayouts(e.$el)}),HUI.slideinLoad(this.$el,i)},close:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;HUI.slideinClose(this.$el,t)}}))}(jQuery),function(t){"use strict";var e=window.Optin||{};e.SShare=e.Module.extend({type:"social_sharing",beforeShowModule:_.noop,events:{"click .hustle-share-icon":"iconClicked"},render:function(){this.collectNativeCounters(),this.display()},showModule:function(){var e=this.$el.data(),i=this;"floating"===e.subType?(HUI.floatLoad(this.el),t(window).on("resize",function(){return HUI.floatLoad(i.el)})):HUI.inlineLoad(this.el)},setOnInit:function(t){void 0!==t.parent&&(this.parent=t.parent)},shouldDisplay:function(){return!0},iconClicked:function(e){var i=t(e.currentTarget),n=i.data("counter"),s=i.data("link");this.isTrackingEnabled&&this.logConversion(),"native"===s&&(e.preventDefault(),this.openNativeSharingUrl(i)),"native"===n?this.updateSocialCounter(i,"native"):"click"===n&&this.updateSocialCounter(i,"click")},logConversion:function(){if(void 0!==e.ModuleLogConversion&&this.isTrackingEnabled){var t=new e.ModuleLogConversion,i="undefined"!==this.$el.data("sub-type")?this.$el.data("sub-type"):"";t.set("module_sub_type",i),t.set("module_id",this.moduleId),t.save()}},openNativeSharingUrl:function(t){var e=t.data("network");e&&void 0!==incOpt.native_share_enpoints[e]&&window.open(incOpt.native_share_enpoints[e],"MsgWindow","menubar=no,toolbar=no,resizable=yes,scrollbars=yes")},updateSocialCounter:function(e,i){var n=e.data("network"),s=".hustle_module_id_"+this.$el.data("id");"click"===i?(this.storeUpdatedClickCounter(n),_.delay(function(){t(s+' a[data-network="'+n+'"]').not('a[data-counter="native"]').each(function(){var e=t(this).find(".hustle-counter");if(e.length){var i=parseInt(e.text())+1;e.text(i)}})},5e3)):_.delay(function(){t(s+' a[data-network="'+n+'"]').not('a[data-counter="click"]').each(function(){var e=t(this).find(".hustle-counter");if(e.length){e.html('<i class="hustle-icon-check" aria-hidden="true"></i>')}})},5e3)},storeUpdatedClickCounter:function(e){t.post({url:incOpt.ajaxurl,dataType:"json",data:{action:"hustle_sshare_click_counted",moduleId:this.moduleId,network:e}})},collectNativeCounters:function(){var i=this.$el.find('.hustle-share-icon[data-counter="native"]');i.length&&(e.networksToRetrieve=e.networksToRetrieve||[],i.each(function(){var i=t(this).data("network");-1===e.networksToRetrieve.indexOf(i)&&e.networksToRetrieve.push(i)}))}})}(jQuery),function(t,e,i){"use strict";incOpt.is_upfront||(t(window).on("resize",_.debounce(function(t){Hustle.Events.trigger("hustle_resize")},300)),t(document).ready(function(){_.each(Modules,function(e,i){if(e.el=".hustle_module_id_"+e.module_id,"popup"===e.module_type)new Optin.PopUp(e);else if("slidein"===e.module_type)new Optin.SlideIn(e);else if("embedded"===e.module_type){var n=t(e.el);n.length?n.each(function(){e.el=this,new Optin.Embedded(e)}):setTimeout(function(){(n=t(e.el)).each(function(){e.el=this,new Optin.Embedded(e)})},incOpt.script_delay)}else if("social_sharing"===e.module_type){t(e.el).each(function(){e.el=this,new Optin.SShare(e)})}}),Optin.updateSshareNetworks()}))}(jQuery,document,window);